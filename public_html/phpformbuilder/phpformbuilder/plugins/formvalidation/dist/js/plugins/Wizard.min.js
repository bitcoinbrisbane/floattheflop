!function(t,e){typeof exports==='object'&&typeof module!=='undefined'?module.exports=e():typeof define==='function'&&define.amd?define(e):(t.FormValidation=t.FormValidation||{}, t.FormValidation.plugins=t.FormValidation.plugins||{}, t.FormValidation.plugins.Wizard=e())}(this,(function(){"use strict";var t=FormValidation.Plugin,e;!function(t){t.Ignored="Ignored";t.Invalid="Invalid";t.NotValidated="NotValidated";t.Valid="Valid";t.Validating="Validating"}(e||(e={}));var n=e,r=FormValidation.utils.classSet,o=FormValidation.plugins.Excluded,i=function(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value" in r&&(r.writable=!0);Object.defineProperty(t,r.key,r)}}return function(e,n,r){n&&t(e.prototype,n);r&&t(e,r);return e}}(),u=function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):(t[e]=n);return t},s=function(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},c=function(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t},l=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else{return Array.from(t)}},a=function(t){s(e,t);function e(t){i(this,e);var n=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.currentStep=0;n.numSteps=0;n.opts=Object.assign({},{activeStepClass:'fv-plugins-wizard--active',onStepActive:function(){},onStepInvalid:function(){},onStepValid:function(){},onValid:function(){},stepClass:'fv-plugins-wizard--step'},t);n.prevStepHandler=n.onClickPrev.bind(n);n.nextStepHandler=n.onClickNext.bind(n);return n}p(e,[{key:'install',value:function(){var t=this;this.core.registerPlugin(e.EXCLUDED_PLUGIN,new o);var n=this.core.getFormElement();this.steps=[].concat(l(n.querySelectorAll(this.opts.stepSelector)));this.numSteps=this.steps.length;this.steps.forEach(function(e){r(e,u({},t.opts.stepClass,!0))});r(this.steps[0],u({},this.opts.activeStepClass,!0));this.prevButton=n.querySelector(this.opts.prevButton);this.nextButton=n.querySelector(this.opts.nextButton);this.prevButton.addEventListener('click',this.prevStepHandler);this.nextButton.addEventListener('click',this.nextStepHandler)}},{key:'uninstall',value:function(){this.core.deregisterPlugin(e.EXCLUDED_PLUGIN);this.prevButton.removeEventListener('click',this.prevStepHandler);this.nextButton.removeEventListener('click',this.nextStepHandler)}},{key:'onClickPrev',value:function(){this.currentStep>=1&&(r(this.steps[this.currentStep],u({},this.opts.activeStepClass,!1)),this.currentStep--,r(this.steps[this.currentStep],u({},this.opts.activeStepClass,!0)),this.onStepActive())}},{key:'onClickNext',value:function(){var t=this;this.core.validate().then(function(e){if(e===n.Valid){var o=t.currentStep+1;o>=t.numSteps?(t.currentStep=t.numSteps-1):(r(t.steps[t.currentStep],u({},t.opts.activeStepClass,!1)),t.currentStep=o,r(t.steps[t.currentStep],u({},t.opts.activeStepClass,!0)));t.onStepActive();t.onStepValid();o===t.numSteps&&t.onValid()}else e===n.Invalid&&t.onStepInvalid()})}},{key:'onStepActive',value:function(){var t={numSteps:this.numSteps,step:this.currentStep};this.core.emit('plugins.wizard.step.active',t);this.opts.onStepActive(t)}},{key:'onStepValid',value:function(){var t={numSteps:this.numSteps,step:this.currentStep};this.core.emit('plugins.wizard.step.valid',t);this.opts.onStepValid(t)}},{key:'onStepInvalid',value:function(){var t={numSteps:this.numSteps,step:this.currentStep};this.core.emit('plugins.wizard.step.invalid',t);this.opts.onStepInvalid(t)}},{key:'onValid',value:function(){var t={numSteps:this.numSteps};this.core.emit('plugins.wizard.valid',t);this.opts.onValid(t)}}]);return e}(t);a.EXCLUDED_PLUGIN='___wizardExcluded';return a}))